{% extends 'base/base.html' %} {% load static %}
<!-- ----------------------------------------- -->

{% block content %}
<!-- filters -->
<form class="w-fill h-12 flex gap-3 justify-start items-center">
	<input type="search" name="aq" id="aq" class="w-52 h-10 border px-3 text-sm" placeholder="search...">
	<input type="date" name="dq" id="dq" class="w-52 h-10 border px-3 text-sm">
	<button class="w-9 h-9">
		<i class="fa-solid fa-search text-mainText"></i>
	</button>
</form>

<!-- filtered content -->
<div class="h-auto w-full px-2 overflow-x-auto relative">
	<table class="aouto whitespace-nowrap w-full border">
		<thead class="">
			<tr class="w-full h-11">
				<th class="text-sm font-medium px-2 border text-left">Staff</th>
				<th class="text-sm font-medium px-2 border text-left">Staff No.</th>
				<th class="text-sm font-medium px-2 border text-left">Date</th>
				<th class="text-sm font-medium px-2 border text-left">Time In</th>
				<th class="text-sm font-medium px-2 border text-left">Break Time</th>
				<th class="text-sm font-medium px-2 border text-left">Time Out</th>
				<th class="text-sm font-medium px-2 border text-left">Status</th>
				<th class="text-sm font-medium px-2 border text-left">Hours Worked</th>
				<th class="text-sm font-medium px-2 border text-center">Actions</th>
			</tr>
		</thead>
		<tbody class="w-full">
			{% for att in attendances %}
				<tr class="w-full h-9 hover:bg-gray-100 even:bg-gray-50">
					<td class="text-sm px-2 text-mainText">{{ att.staff.full_name }}</td>
					<td class="text-sm px-2 text-mainText">{{ att.staff.staff_number }}</td>
					<td class="text-sm px-2 text-mainText">{{ att.date }}</td>
					<td class="text-sm px-2 text-mainText">{{ att.time_in }}</td>
					<td class="text-sm px-2 text-mainText">{{ att.break_time }}</td>
					<td class="text-sm px-2 text-mainText">{{ att.time_out }}</td>
					<td class="text-sm px-2 text-mainText">{{ att.status }}</td>
					<td class="text-sm px-2 text-mainText">{{ att.hours_worked }}</td>
					<td class="text-sm text-mainText w-full h-9 flex gap-2 justify-center items-center">
						<button  id="update-att-btn"
							hx-get="{% url 'attendance-update' att.pk %}" 
							hx-trigger="click"
							hx-swap="inerHTML"
							hx-target="#att-update"
							class="w-full h-full flex justify-center gap-2 
							items-center hover:bg-cyan-500 hover:text-white">
							<i class="fa-solid fa-pen"></i>
							Edit
						</button>
					</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>

	
</div>
{% endblock %}

{% block scripts %}
<script>
	$("*#update-att-btn").click(function(){
		$("#att-update-modal").fadeIn(100);
	})
</script>
{% endblock %}
